################################################################################
# CSwap DEX Production Environment Configuration
#
# SECURITY WARNING: This file contains sensitive configuration values.
# - Never commit this file to version control
# - Use strong, randomly generated passwords and secrets
# - Restrict file permissions: chmod 600 .env.production
#
# Usage:
#   1. Copy this file: cp .env.production .env
#   2. Update all values marked with <CHANGE_THIS>
#   3. Generate secure values for passwords and secrets
#   4. Set appropriate RPC URLs for your networks
################################################################################

# ============================================================================
# Application Configuration
# ============================================================================

NODE_ENV=production
APP_NAME="CSwap DEX"
APP_URL=https://cryptoswap.com
PORT=8000
FRONTEND_PORT=3000

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================

POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=cswap_dex
POSTGRES_USER=cswap_user
POSTGRES_PASSWORD=BwWkA5u12QBfuljdEohtwPQvjS72xePtO8msj

# Database connection pool settings
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=5000
DB_QUERY_TIMEOUT=5000
DB_IDLE_TIMEOUT=30000
DB_MAX_USES=7500

# Database connection URL (used by some ORMs)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ============================================================================
# Redis Configuration
# ============================================================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=d64LGqhfZ2xOIDSaWMyMOLyP3ImzJKGhCKoxF9
REDIS_DB=0
REDIS_TIMEOUT=300

# Redis connection URL
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ============================================================================
# Security Configuration
# ============================================================================

# JWT Secret for authentication (generate with: openssl rand -base64 64)
JWT_SECRET="AhTpe8PZmGC/bw2t7kY2LtHNF/Bwtezw0rzI8vEWBMGMPvObUuDfE1o0ca7jazH
BP4BcMPzE9CFHudFdXApww=="
JWT_EXPIRY=24h
JWT_REFRESH_SECRET="7Mz2VVUID2HUVYRRAMrXAryDS4Q8F8G3u0j4L/VUFXCH4ESNs0rdhCKsfV37KyBo
JD83T1DJjni+pyST8yFWHg=="
JWT_REFRESH_EXPIRY=7d

# Session secret (generate with: openssl rand -base64 64)
SESSION_SECRET="7KnzVz06aC/eMTke9ywEWPkb9A0Pn9Al3JN/njnRd+BfvJ27OF7aWWFcAijUyzkD
DZv46CeBEtE0MJ2nAb4YbA=="
SESSION_TIMEOUT=86400000

# API Keys (generate with: openssl rand -hex 32)
API_KEY_SALT=b079384f0fce5dba4817f692a7cf9d5d705dcb58196a28a6d2d4c971624e944f
INTERNAL_API_KEY=f8c8fad74f71a71320b9fca151db11683ad5d8843d7c664d044c99f93098aabf

# CORS Configuration
CORS_ORIGIN=https://cryptoswap.com,https://www.cryptoswap.com
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# ============================================================================
# Blockchain Network Configuration
# ============================================================================

# Avalanche Network
AVALANCHE_RPC_URL=https://api.avax.network/ext/bc/C/rpc
AVALANCHE_CHAIN_ID=43114
AVALANCHE_NETWORK_NAME=Avalanche C-Chain
AVALANCHE_EXPLORER_URL=https://snowtrace.io

# Alternative Avalanche RPC endpoints (fallback)
AVALANCHE_RPC_FALLBACK_1=https://rpc.ankr.com/avalanche
AVALANCHE_RPC_FALLBACK_2=https://avalanche.public-rpc.com

# Trader Joe Contract Addresses (Avalanche)
TRADER_JOE_ROUTER=0xb4315e873dBcf96Ffd0acd8EA43f689D8c20fB30
TRADER_JOE_FACTORY=0x9Ad6C38BE94206cA50bb0d90783181662f0Cfa10
TRADER_JOE_QUOTER=0x0000000000000000000000000000000000000000

# SEI Network
SEI_RPC_URL=https://sei-rpc.polkachu.com
SEI_REST_URL=https://sei-api.polkachu.com
SEI_CHAIN_ID=pacific-1
SEI_NETWORK_NAME=SEI Network
SEI_EXPLORER_URL=https://www.seiscan.app

# Alternative SEI RPC endpoints (fallback)
SEI_RPC_FALLBACK_1=https://rpc.sei-apis.com
SEI_RPC_FALLBACK_2=https://sei-rpc.brocha.in

# Astroport Contract Addresses (SEI)
ASTROPORT_FACTORY=sei1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqmcn3lx
ASTROPORT_ROUTER=sei1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqmcn3lx
ASTROPORT_PAIR_CODE_ID=0

# ============================================================================
# Timeout Configurations (milliseconds)
# ============================================================================

# API request timeouts
TIMEOUT_API_REQUEST=10000
TIMEOUT_CONNECT=5000
TIMEOUT_IDLE=30000

# Web3 operation timeouts
TIMEOUT_WEB3_CALL=15000
TIMEOUT_TRANSACTION_WAIT=120000
TIMEOUT_BLOCK_CONFIRMATION=180000

# Cross-chain operation timeouts
TIMEOUT_CROSS_CHAIN=30000
TIMEOUT_BRIDGE_OPERATION=300000

# Database operation timeouts
TIMEOUT_DB_QUERY=5000
TIMEOUT_DB_TRANSACTION=10000

# External service timeouts
TIMEOUT_PRICE_FEED=8000
TIMEOUT_ORACLE_CALL=10000

# ============================================================================
# Circuit Breaker Configuration
# ============================================================================

# Circuit breaker thresholds
CIRCUIT_BREAKER_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT=5000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000
CIRCUIT_BREAKER_RECOVERY_TIME=60000

# Service-specific circuit breakers
PRICE_FEED_CIRCUIT_BREAKER_THRESHOLD=5
BRIDGE_CIRCUIT_BREAKER_THRESHOLD=5
RPC_CIRCUIT_BREAKER_THRESHOLD=3

# ============================================================================
# Logging Configuration
# ============================================================================

LOG_LEVEL=info
LOG_FORMAT=json
LOG_DIRECTORY=/opt/cswap-dex/logs
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14d
LOG_COMPRESS=true

# Error tracking (optional - Sentry, etc.)
SENTRY_DSN=<OPTIONAL_SENTRY_DSN>
SENTRY_ENVIRONMENT=production
SENTRY_SAMPLE_RATE=0.1

# ============================================================================
# Monitoring Configuration
# ============================================================================

# Health check configuration
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_ENABLED=true

# Metrics collection
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# ============================================================================
# Email Configuration (optional)
# ============================================================================

SMTP_HOST=<SMTP_SERVER>
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=<SMTP_USERNAME>
SMTP_PASSWORD=<SMTP_PASSWORD>
EMAIL_FROM=noreply@cryptoswap.com
EMAIL_FROM_NAME="CSwap DEX"

# Admin notification emails
ADMIN_EMAIL=admin@cryptoswap.com
ALERT_EMAIL=alerts@cryptoswap.com

# ============================================================================
# Trading Configuration
# ============================================================================

# Slippage tolerance (percentage)
DEFAULT_SLIPPAGE_TOLERANCE=0.5
MAX_SLIPPAGE_TOLERANCE=5.0

# Gas price settings (Gwei for EVM chains)
GAS_PRICE_MULTIPLIER=1.1
MAX_GAS_PRICE=500
MIN_GAS_PRICE=25

# Transaction settings
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_MS=2000
CONFIRMATION_BLOCKS=2

# ============================================================================
# Liquidity Pool Configuration
# ============================================================================

# Pool management
MIN_LIQUIDITY_USD=1000
MAX_POOL_FEE_PERCENTAGE=1.0
DEFAULT_POOL_FEE_PERCENTAGE=0.3

# Pool monitoring
POOL_SYNC_INTERVAL=60000
POOL_HEALTH_CHECK_INTERVAL=300000

# ============================================================================
# Cache Configuration
# ============================================================================

# Cache TTL settings (seconds)
CACHE_TTL_POOLS=300
CACHE_TTL_PRICES=30
CACHE_TTL_USER_DATA=600
CACHE_TTL_STATIC_DATA=3600

# Cache invalidation
CACHE_AUTO_INVALIDATE=true
CACHE_INVALIDATE_ON_ERROR=true

# ============================================================================
# Feature Flags
# ============================================================================

FEATURE_CROSS_CHAIN_ENABLED=true
FEATURE_LIQUIDITY_POOLS_ENABLED=true
FEATURE_FARMING_ENABLED=false
FEATURE_STAKING_ENABLED=false
FEATURE_ADMIN_PANEL_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true

# ============================================================================
# Third-Party Integrations
# ============================================================================

# Price data providers
COINGECKO_API_KEY=<OPTIONAL_COINGECKO_PRO_API_KEY>
COINMARKETCAP_API_KEY=<OPTIONAL_CMC_API_KEY>

# Analytics
GOOGLE_ANALYTICS_ID=<OPTIONAL_GA_ID>
MIXPANEL_TOKEN=<OPTIONAL_MIXPANEL_TOKEN>

# ============================================================================
# Backup Configuration
# ============================================================================

BACKUP_ENABLED=true
BACKUP_INTERVAL=86400000
BACKUP_RETENTION_DAYS=30
BACKUP_DIRECTORY=/opt/cswap-dex/backups
BACKUP_COMPRESS=true

# ============================================================================
# Docker Configuration
# ============================================================================

COMPOSE_PROJECT_NAME=cswap-dex
COMPOSE_FILE=docker-compose.yml

# Container resource limits
FRONTEND_MEMORY_LIMIT=512m
BACKEND_MEMORY_LIMIT=1g
DB_MEMORY_LIMIT=512m
REDIS_MEMORY_LIMIT=256m

# ============================================================================
# SSL/TLS Configuration
# ============================================================================

SSL_ENABLED=true
SSL_CERT_PATH=/etc/letsencrypt/live/cryptoswap.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/cryptoswap.com/privkey.pem
SSL_AUTO_RENEW=true

# ============================================================================
# Development/Debug (disable in production)
# ============================================================================

DEBUG=false
VERBOSE_LOGGING=false
ENABLE_SWAGGER_DOCS=false
ALLOW_CORS_ALL=false

